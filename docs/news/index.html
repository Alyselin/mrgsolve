<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>All news • mrgsolve</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">mrgsolve</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/metrumresearchgroup/mrgsolve">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">

  <div class="col-md-9">
    <div class="page-header">
      <h1>Change log <small>All releases</small></h1>
    </div>

    <div class="contents">
    <div id="since-0-7-7" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-7-7" class="anchor"> </a>Since 0.7.7</h1>
<ul>
<li>No changes so far.</li>
</ul>
</div>
    <div id="since-0-7-6" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-7-6" class="anchor"> </a>Since 0.7.6</h1>
<div id="important-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#important-changes" class="anchor"> </a>Important changes</h2>
<ul>
<li>The <code>table()</code> macro in <code>$TABLE</code> is now deprecated (<a href="https://github.com/metrumresearchgroup/mrgsolve/pull/129" class="uri">https://github.com/metrumresearchgroup/mrgsolve/pull/129</a>). To get derived values into the simulated output, users should assign to type <code>double</code> and list that variable name in <code>$CAPTURE</code>. See also the <code>capture</code> typedef introduced below.</li>
<li>The <code>mrgx</code> plugin was completely removed.<br>
</li>
<li>Parameter updates via <code>param</code> method with signature <code>missing</code> will check names of input parameters against names of existing parameters. An error is generated if a user attempts to update a parameter that doesn’t exist. Note that this does not apply for the <code>param</code> method with signature <code>list</code> (../../issues/144).</li>
<li>The git repository was re-organized so that the package lives in the base directory (<a href="https://github.com/metrumresearchgroup/mrgsolve/pull/171" class="uri">https://github.com/metrumresearchgroup/mrgsolve/pull/171</a>).</li>
</ul>
</div>
<div id="features" class="section level2">
<h2 class="hasAnchor">
<a href="#features" class="anchor"> </a>Features</h2>
<ul>
<li>Added <code>@</code> macros for indicating block options in model specification file.</li>
<li>Added <code>qsim</code> function for quick(er) simulation runs with just one parameter set.<br>
</li>
<li>Added <code>recmatrix</code> that creates matrix simulation template for <code>qsim</code>.</li>
<li>Added <code>mrgsolve:::render</code> to create a document with overview of model contents. Methods for both <code>mrgmod</code> objects and <code>character</code> strings pointing to a model file.</li>
<li>Use <code>mrgsolve:::details</code> to extract model annotation.</li>
<li>Added <code>capture</code> typedef in the model specification file. Variables that are type <code>capture</code> are doubles and are automatically appended to <code>$CAPTURE</code>. The <code>capture</code> typedef is not allowed in <code>$ODE</code> and probably should be reserved for <code>$TABLE</code>.</li>
<li>
<code>simeta</code> is available in <code>$MAIN</code> and <code>simeps</code> is available in <code>$TABLE</code> by default, no <code>$PLUGIN</code> is required.</li>
<li>Better support for including <code>R</code> objects in the model via <code>$ENV</code> (../../issues/158).</li>
<li>Added <code>assign_ev</code> function to help build simulation data sets from event objects (<a href="https://github.com/metrumresearchgroup/mrgsolve/pull/164" class="uri">https://github.com/metrumresearchgroup/mrgsolve/pull/164</a>).</li>
<li>Added <code>as_data_frame</code> method from the <code>tibble</code> package (../../issues/166).</li>
<li>When annotating model blocks, <code>mrgsolve</code> takes the <strong>last</strong> parens item as the “units” and the <strong>last</strong> bracketed item as “options”</li>
<li>Added <code>$</code> operator for <code>mrgmod</code> objects to return the value of a parameter (99748d8a7e4976fc710152c2dfc82da9b059a852).</li>
<li>Added <code>mread_cache</code> and <code>mcode_cache</code> functions to build and cache a model (<a href="https://github.com/metrumresearchgroup/mrgsolve/pull/143" class="uri">https://github.com/metrumresearchgroup/mrgsolve/pull/143</a>).</li>
</ul>
</div>
<div id="bugs-fixed" class="section level2">
<h2 class="hasAnchor">
<a href="#bugs-fixed" class="anchor"> </a>Bugs fixed</h2>
<ul>
<li>Fixed documentation issue in <code>PKMODEL</code>. The volumes for two-compartment model with no depot should be <code>V1</code>/<code>V2</code>.</li>
<li>Fixed bug in <code>knobs</code> where output column names are mal-formed when a user <code>$CAPTURE</code>s a parameter that is also being tweaked as a knob.</li>
<li>Fixed bug in annotated model specification when multiple unit or option specifications are made.</li>
</ul>
</div>
<div id="under-the-hood" class="section level2">
<h2 class="hasAnchor">
<a href="#under-the-hood" class="anchor"> </a>Under the hood</h2>
<ul>
<li>User-declared <code>double/int/bool</code> in <code>$MAIN</code>, <code>$ODE</code>, <code>$TABLE</code> are kept in unnamed namespace and are local to the file.</li>
<li>Started to re-organize the <code>.R</code> files.</li>
<li>
<code>mrgsolve:::details</code> returns a data frame of information regardless of whether the model was annotated or not (../../issues/165).</li>
<li>
<code>mrgsolve::details</code> has additional arguments to help control output.</li>
<li>Removed <code>pkevent</code> class; all records are <code>datarecord</code>.</li>
</ul>
</div>
</div>
    <div id="since-0-7-5" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-7-5" class="anchor"> </a>Since 0.7.5</h1>
<div id="features-1" class="section level2">
<h2 class="hasAnchor">
<a href="#features-1" class="anchor"> </a>Features</h2>
<ul>
<li>Added annotated code blocks for <code>$PARAM</code>, <code>$FIXED</code>, <code>$THETA</code>, <code>$CMT</code>, <code>$INIT</code>, and <code>$VCMT</code>. (../../issues/107)</li>
<li>
<code>mrgsolve:::house()</code> model re-coded as an annotated model.</li>
<li>Re-implemented <code>$ENV</code> to allow users to create <code>R</code> objects that can be used at certain points when parsing the model. (../../issues/115)</li>
<li>Added <code>&gt;&gt;</code> signifier to code blocks that allow options; <code>&gt;&gt;</code> at the beginning of the line indicates that the <code>name=value</code> statements that follow are to be parsed as block options.</li>
<li>Added <code>object</code> argument for the following blocks: <code>$PARAM</code>, <code>$OMEGA</code>, <code>$SIGMA</code>, <code>$FIXED</code>, <code>$CMT</code>. When <code>object</code> is set to a character string naming an object in <code>$ENV</code>, that object will be used to form the output from the block.</li>
</ul>
</div>
<div id="bugs-fixed-1" class="section level2">
<h2 class="hasAnchor">
<a href="#bugs-fixed-1" class="anchor"> </a>Bugs fixed</h2>
<ul>
<li>Fixed a bug which caused simulation run to hang when implementing a dose with a <strong>very</strong> small lag time. (../../issues/109)</li>
<li>Fixed a bug where <code>valid.numericlist</code> wasn’t returning <code>FALSE</code> for improperly-formed objects.</li>
</ul>
</div>
<div id="under-the-hood-1" class="section level2">
<h2 class="hasAnchor">
<a href="#under-the-hood-1" class="anchor"> </a>Under the hood</h2>
<ul>
<li>Now using an <code>environment</code> to collect objects when parsing the model specification file.</li>
<li>Some small changes to <code>C++</code> code that calculates compartment amounts for closed form one- and two-compartment models resulting in faster simulation runs.</li>
</ul>
</div>
</div>
    <div id="since-0-7-4" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-7-4" class="anchor"> </a>Since 0.7.4</h1>
<ul>
<li>The <code>modmrg</code> package was discontinued. All of the pre-coded models are now available in <code>mrgsolve</code>. Simply call <code>mread</code> with the model stem (e.g. <code>pk1cmt</code>, <code>irm3</code>, etc …) and call <code><a href="../reference/modlib.html">modlib()</a></code> as the <code>project</code> argument. For example: <code>mod &lt;- mread("emax", modlib())</code> will compile the <code>emax</code> model and return the model object.</li>
</ul>
</div>
    <div id="since-0-7-3" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-7-3" class="anchor"> </a>Since 0.7.3</h1>
<ul>
<li>Tests re-configured</li>
<li>Fixed issue with record sorting for lagged doses when using full <code>data_set</code>and <code>obsaug=TRUE</code> <a href="../../issues/102">(#102)</a>
</li>
<li>Fixed issue where <code>idata_set</code> wasn’t handled properly when it was passed in as <code>tbl</code> <a href="../../issues/100">(#100)</a>
</li>
</ul>
</div>
    <div id="since-0-7-2" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-7-2" class="anchor"> </a>Since 0.7.2</h1>
<ul>
<li>Addressed an issue where model compilation on <code>Windows</code> systems failed when certain symbol names were used in the model (#97). In this release, a <code>dllname-win.def</code> file is created in <code>soloc</code> to export only the functions that <code>mrgsolve</code> needs to use. This is <em>only</em> relevant to <code>Windows</code> platform.</li>
<li>Added a check on the <code>project</code> argument to <code>mread</code>: if newline(s) are found, an error is generated and the user is prompted to use <code>mcode</code> instead.</li>
<li>Several changes under the hood (<a href="https://github.com/metrumresearchgroup/mrgsolve/pull/99" class="uri">https://github.com/metrumresearchgroup/mrgsolve/pull/99</a>)</li>
</ul>
</div>
    <div id="since-0-7-1" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-7-1" class="anchor"> </a>Since 0.7.1</h1>
<ul>
<li>Fixed bug where requested columns were not properly named in certain circumstances (<a href="../../issues/86">#86</a>).</li>
</ul>
</div>
    <div id="since-0-7-0" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-7-0" class="anchor"> </a>Since 0.7.0</h1>
<ul>
<li>Revert back to previous behavior where <code>cwd</code> to <code>soloc</code> is not required to build the model. This was only required on <code>Windows</code> systems where there was a space in the file name. Correctly rendering the path for the build directory now.</li>
</ul>
</div>
    <div id="since-0-6-1" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-6-1" class="anchor"> </a>Since 0.6.1</h1>
<div id="features-2" class="section level2">
<h2 class="hasAnchor">
<a href="#features-2" class="anchor"> </a>Features</h2>
<ul>
<li>Added <code>as_data_set</code> to convert one or more event objects into a data frame that can be passed to <code>data_set</code>. Does something similar to <code>expand.ev</code>, but more control.</li>
<li>For special column names (<code>time</code>, <code>amt</code>, <code>rate</code>, <code>evid</code>, <code>ii</code>, <code>addl</code> ,<code>ss</code>, <code>cmt</code>) either lower case or upper case names are recognized. The determination is made on the <code>time</code> / <code>TIME</code> column (always required when using a data set). If <code>time</code> <code>mrgsolve</code> will continue looking for lower case names; if <code>TIME</code> it will look for upper case names. A warning is issued in case both upper and lower case names are included.</li>
<li>Added <code>$PLUGIN</code> to let users extend their model specification file. Valid plugins include <code>simeta</code>, <code>Rcpp</code>, <code>RcppArmadillo</code>, and <code>BH</code>. When a plugin is used, <code>mrgsolve</code> will link back the the appropriate package and possibly include appropriate header files when compiling the model. For example, <code>simeta</code> will link back to <code>mrgsolve</code> and <code>RcppArmadillo</code> and allow the modeler to simulate a new set of <code>ETA</code>s. Use <code>Rcpp</code> plugin to simulate random variates from common distibutions in <code>R</code>(e.g. <code>rnorm</code>, <code>rexp</code> etc … ).</li>
</ul>
</div>
<div id="bugs-fixed-2" class="section level2">
<h2 class="hasAnchor">
<a href="#bugs-fixed-2" class="anchor"> </a>Bugs fixed</h2>
<ul>
<li>Fixed issue with <code>ev</code> where no rows were returned if <code>amt</code> wasn’t supplied (<a href="../../issues/44">issue 44</a>).</li>
<li>Shortened the path for both the shared object and the name of the <code>.cpp.cpp</code> file when compiling.</li>
<li>Fixed bug in <code>touch_funs</code> when large number (<code>&gt; 25</code>) of ETAs in the model (<a href="../../issues/68">issue 68</a>).</li>
</ul>
</div>
<div id="important-changes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#important-changes-1" class="anchor"> </a>Important changes</h2>
<ul>
<li>When using <code>$PKMODEL</code> with <code>ncmt=2</code> and <code>depot=FALSE</code>, the default PK parameters are <code>CL</code>, <code>V1</code> (central volume), <code>Q</code>, <code>V2</code> (peripheral volume). This is a change where the previous volumes were <code>V2</code> (central) and <code>V3</code> (peripheral).</li>
<li>
<code>$CAPTURE</code> now saves output items to slots in <code>std::vector&lt;double&gt;</code>, rather than <code>std::map&lt;std::string,double&gt;</code>. We’ve known for a while that the <code>std::map</code> wasn’t very efficient especially with large simulations. Currently, items in <code>$TABLE</code> are still saved into <code>std::map</code> with <code>table()</code> macro. The plan going forward is to eliminate that <code>table</code> <code>map</code> and force output variables into <code>$CAPTURE</code>.</li>
<li>Due to major changes to <code>dplyr</code>, now requiring <code>dplyr &gt;= 0.5.0</code> (<a href="../../issues/69">issue 69</a>)</li>
<li>The <code>data</code> slot in <code>mrgsims</code> objects is now <code>data.frame</code>
</li>
<li>The <code>knobs</code> function and <code>plot</code> method has been re-written. Overall behavior for most applications should be the same.</li>
</ul>
</div>
<div id="under-the-hood-2" class="section level2">
<h2 class="hasAnchor">
<a href="#under-the-hood-2" class="anchor"> </a>Under the hood</h2>
<ul>
<li>
<code>C++</code> symbols for model functions are now stored in the model object (<code>funs</code> slot)</li>
<li>The status of the model object (function names and compile status) can be checked with <code>mrgsolve:::funset(mod)</code>
</li>
<li>A model is considered to be loaded and ready to go if all functions in <code>funs</code> can be found with <code>is.loaded</code>
</li>
<li>Model shared objects are still stored within the <code>soloc</code> directory (by default <code>tempdir()</code>), but <code>mrgsolve</code> will create a subdirectory structure to organize compilation artifacts. The outer directory is keyed based on the current <code>mrgsolve</code> version number and the computer platform. Inner directories are based on the model name (<code>model(mod)</code>).<br>
</li>
<li>A source file is created based on the <code>model</code> name and the shared object is created based on that name. If the compilation is successful, the shared object (<code>.so</code> on mac/unix, <code>.dll</code> on Windows) is copied to a <code>.so</code> or <code>.dll</code> file with a unique stem (e.g. <code>model2lj239wsfo.so</code>). This unique shared object is loaded into the <code>R</code> process for use with the model.<br>
</li>
<li>Every time the model is rebuilt, the build directory is scanned for shared object files. Excluding the main model shared object (unchanging name based on the model), old shared object files are deleted and, if currently loaded (<code>getLoadedDLLs()</code>), are attempted to be <code>dyn.unload</code>ed.</li>
<li>Upon model rebuild (via <code>mread</code> or <code>mcode</code>), if there are no changes to the source <code>.cpp</code> file, the source is not overwritten. In that case, <code>make</code> will not re-build the shared object. Using the <code>preclean</code> argument will force re-compilation (see <code>R CMD SHLIB</code>).</li>
<li>The header files <code>modelheader.h</code> and <code>mrgsolv.h</code> are no longer copied into the project directory. But <code>CLINK_CPPFLAGS</code> environment variable is modlifed to include <code>&lt;path-to-mrgsolve-package&gt;/inst/base</code> so that these may be linked.</li>
<li>The <code>R CMD SHLIB</code> build process always uses <code>intern=TRUE</code> so that output is suppressed on both <code>Windows</code> and <code>mac/unix</code>. The user may still request to view build output with the <code>ignore.stdout</code> argument.</li>
<li>Model build always links-to the <code>project</code> directory to look for <code>C++</code> header files. When including a header file that may change from build to build, always run with <code>preclean=TRUE</code>.</li>
<li>
<code>mrgsolve</code> now changes the working directory prior to building a model. The working directory is restored on exit from <code>mread</code>.</li>
</ul>
</div>
<div id="deprecated" class="section level2">
<h2 class="hasAnchor">
<a href="#deprecated" class="anchor"> </a>Deprecated</h2>
<ul>
<li>The entire <code>complog</code> system, including:
<ul>
<li>
<code>comp_forget</code> a message is issued</li>
<li>
<code>complog</code> no message is issued</li>
</ul>
</li>
<li>
<code>trequest</code> argument to <code>mrgsim</code>
</li>
</ul>
</div>
</div>
    <div id="since-0-6-0" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-6-0" class="anchor"> </a>Since 0.6.0</h1>
<div id="bugs-fixed-3" class="section level2">
<h2 class="hasAnchor">
<a href="#bugs-fixed-3" class="anchor"> </a>Bugs fixed</h2>
<ul>
<li>Fixed a bug when an infusion was attempted with <code>rate &gt; 0</code> and <code>amt==0</code>. Additionally, an error is generated when an infusion is attempted with zero <code>amt</code> (<a href="../../issues/43">issue 43</a>).</li>
</ul>
</div>
</div>
    <div id="since-0-5-12" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-5-12" class="anchor"> </a>Since 0.5.12</h1>
<div id="bugs-fixed-4" class="section level2">
<h2 class="hasAnchor">
<a href="#bugs-fixed-4" class="anchor"> </a>Bugs fixed</h2>
<ul>
<li>Fixed a bug where infusion dosing events with <code>evid 4</code> were not properly implemented. While investigating that issue, also found similar issue with <code>evid 4</code> infusions getting scheduled with <code>addl</code> (<a href="../../issues/31">issue 31</a>).</li>
<li>Removed NSE evaluation for arguments passed into <code>ev</code> to avoid unintended issues in evaluation (<a href="../../issues/29">issue 29</a>).</li>
</ul>
</div>
<div id="new-features" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features" class="anchor"> </a>New features</h2>
<ul>
<li>Added <code>mcode</code> function as alternative to using <code>mread</code> when your model is written in an <code>R</code> string. Note the order of the arguments: first <code>model</code>, then <code>code</code>, then <code>project</code>. <code>project</code> defaults to <code>tempdir</code>. So the call is: <code>mod &lt;- mcode("mymodel", code)</code>. The equivalent <code>mread</code> call is: <code>mod &lt;- mread("mymodel", tempdir(),code)</code>.</li>
<li>
<code><a href="../reference/carry.out.html">carry.out()</a></code> and <code><a href="../reference/Req.html">Req()</a></code> now take <code>newname = oldname</code> as input. Use this syntax in <code>carry.out</code> when you want to copy a column from the input data set into the simulated data set, changing the column to <code>newname</code> from <code>oldname</code>. Use this syntax in <code>Req</code> when you want to change the names of compartments or output variables spcified in <code>$TABLE</code> / <code>$CAPTURE</code>.</li>
<li>Added <code>pkmodel</code> function for easy loading and simulating from 1- and 2-compartment models (<a href="../../issues/39">issue 39</a>).</li>
<li>Added new code block: <code>$PKMODEL</code> for simulating PK model with analytical solutions. The main option for this block is <code>ncmt</code>, which picks the number of compartments for the pk model. See <code><a href="../reference/PKMODEL.html">?PKMODEL</a></code> for more information and other options (<a href="../../issues/34">issue 34</a>).</li>
</ul>
</div>
<div id="under-the-hood-3" class="section level2">
<h2 class="hasAnchor">
<a href="#under-the-hood-3" class="anchor"> </a>Under the hood</h2>
<ul>
<li>Added <code>code</code> attribute to <code>mrgmod</code> objects. The actual source code stays with the model object. <code>see</code> was modified to look at <code>x@code</code> first when showing the model code.</li>
<li>Added a tokenizer function (<code>get_tokens</code>), a wrapper for the boost tokenizer) to help checking the model specification file.</li>
<li>Data items entered in <code>$FIXED</code> are now implemented as C++ preprocessor directives by default rather than <code>const double</code> variables. Use <code>$SET fixed_type = "define"</code> or <code>$SET fixed_type = "const"</code> to select between the approaches.</li>
</ul>
</div>
</div>
    <div id="since-0-5-11" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-5-11" class="anchor"> </a>Since 0.5.11</h1>
<div id="bugs-fixed-5" class="section level2">
<h2 class="hasAnchor">
<a href="#bugs-fixed-5" class="anchor"> </a>Bugs fixed</h2>
<ul>
<li>Added missing example model specification files (popExample, viralExample, others)</li>
<li>Added <code>mindt</code> attribute to <code>mrgmod</code> objects with default value of <code>.Machine$double.eps*10</code>. When the problem includes an infusion, the calculated end of the infusion may come too close to another record. Usually the solver will fail with the message <code>DLSODA- TOUT(=R1) too close to T(=R2) to start integration.</code>. To fix this, set <code>mindt</code> to be greater than zero but small … maybe 1E-12. When <code>mindt</code> is greater than zero and <code>tto - tfrom</code> (the times of two adjacent records) is less than <code>mindt</code>, <code>mrgsolve</code> will set <code>tto</code> equal to <code>tfrom</code> (<a href="../../issues/9">issue 9</a>).</li>
<li>
<code>zero.re</code> didn’t properly update the <code>$SIGMA</code> list when one matrix was named and another was unnamed. This has been fixed. (<a href="../../issues/16">issue 16</a>)</li>
<li>Fixed a bug where infusions with <code>ss</code>=1 caused <code>mrgsolve</code>/<code>R</code> to crash when the infusion duration was equal to or some multiple of the dosing interval. (<a href="../../issues/19">issue 19</a>)</li>
<li>Fixed a bug where setting <code>F_CENT</code> to zero gave undefined behavior. <code>mrgsolve</code> will issue an error if <code>F_CMT</code> is set to zero and the <code>ss</code> flag is set to 1. (<a href="../../issues/16">issue 22</a>)</li>
<li>Fixed bug where dosing records with <code>evid=4</code> (reset the system and dose) and <code>addl &gt; 0</code> reset the system for all subsequent doses. Additional doses coming from records with <code>evid=4</code> will not do system reset. (<a href="../../issues/23">issue 23</a>)</li>
</ul>
</div>
<div id="important-changes-2" class="section level2">
<h2 class="hasAnchor">
<a href="#important-changes-2" class="anchor"> </a>Important changes</h2>
<ul>
<li>New arguments for <code>$NMXML</code> (see <code><a href="../reference/nmxml.html">?nmxml</a></code>) that are easier to understand and consistent with new prefixes and labels for <code>ETA</code> and <code>EPS</code>. <code>name</code> argument is removed. Use <code>tname</code> (to provide a prefix for <code>THETAs</code>), <code>oname</code> (to name the <code>OMEGA</code> matrix), and <code>sname</code> (to name the <code>SIGMA</code> matrix) instead. In general, set <code>theta</code> to be <code>TRUE</code> to import <code>THETAs</code>, set <code>omega</code> to be <code>TRUE</code> to import <code>OMEGA</code>, and set <code>sigma</code> to be <code>TRUE</code> to import <code>SIGMA</code>. Specifying character names <code>tname</code>, <code>oname</code>, and <code>sname</code> will imply <code>theta=TRUE</code>, <code>omega=TRUE</code>, and <code>sigma=TRUE</code>, respectively.</li>
</ul>
</div>
<div id="new-features-1" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-1" class="anchor"> </a>New features</h2>
<ul>
<li>New aliases available for setting bioavailability, lag time and infusion duration and rate. For a compartment called <code>DEPOT</code> use: <code>F_DEPOT</code> (bioavailability), <code>ALAG_DEPOT</code> (dosing lag time), <code>D_DEPOT</code> (infusion duration), and / or <code>R_DEPOT</code> (infusion rate). (<a href="../../issues/13">issue 13</a>)</li>
<li>Added <em>slightly</em> more informative messages when <code>DLSODA</code> fails, including clear identification if the value of <code>istate</code>, which is 2 when the solver succeeds and negative when the solver fails.</li>
<li>Added <code>labels</code> and <code>prefix</code> options to <code>$OMEGA</code> and <code>$SIGMA</code>. These allow descriptive aliases for ETAs … e.g. using <code>ETA_CL</code> rather than <code>ETA(1)</code>. (<a href="../../issues/15">issue 15</a>)</li>
<li>Added <code>dplyr::slice</code> method for <code>mrgsims</code> objects (<a href="../../issues/11">issue 11</a>)</li>
<li>New argument to <code>mread</code>: <code>quiet</code>. Setting <code>quiet</code> to <code>TRUE</code> will prevent printing messages when <code>mread</code> is called. The default is <code>getOptions("mrgsolve_mread_quiet",FALSE)</code> … so you can call <code>options(mrgsolve_mread_quiet = TRUE)</code> to globally turn off messages from <code>mread</code>.</li>
</ul>
</div>
</div>
    <div id="since-0-5-001" class="section level1">
<h1 class="hasAnchor">
<a href="#since-0-5-001" class="anchor"> </a>Since 0.5.001</h1>
<div id="bugs-fixed-6" class="section level2">
<h2 class="hasAnchor">
<a href="#bugs-fixed-6" class="anchor"> </a>Bugs Fixed</h2>
<ul>
<li>Fixed paths for project (<code>project</code>) and shared object (<code>soloc</code>) so that “short” paths are used when compiling the model on Windows platforms (info <a href="https://github.com/metrumresearchgroup/mrgsolve/issues/4">issue 4</a> and <a href="https://github.com/metrumresearchgroup/mrgsolve/wiki/Windows-issues#spaces-in-project-directory-path">here</a>)</li>
<li>Fixed a bug where bioavailability fraction was not accounted for when setting infusion duration in <code>$MAIN</code> with <code>rate=-2</code> (see <a href="https://github.com/metrumresearchgroup/mrgsolve/issues/3">issue 3</a>)</li>
<li>
<code>mrgsolve_example</code> prints a message telling the user to use <code>mrgmod</code> to read and compile the model. The user should use <code>mread</code>. The message has been updated. (info <a href="https://github.com/metrumresearchgroup/mrgsolve/issues/5">issue 5</a>)</li>
<li>Fixed bug where parameters were not correctly read from first row of a data set when certain <code>recsort</code> options were selected (<a href="https://github.com/metrumresearchgroup/mrgsolve/issues/6">issue 6</a>)</li>
</ul>
</div>
<div id="new-features-2" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-2" class="anchor"> </a>New Features</h2>
<ul>
<li>Added <code>$ADVAN2</code> and <code>$ADVAN4</code> for implementing one- and two-compartment PK models with analytical solutions rather than ODEs (thanks to contributions by Bill Gillespie and Charles Margossian)</li>
<li>Added <code>soloc</code> attribute added to <code>mrgmod</code> and argument added to <code>mread</code>, giving user control over where the shared object is stored; by default it is in <code>tempdir()</code>. <code>soloc</code> needs to be set to local directory when using <code>qapply</code>
</li>
<li>Added generics for various <code>dplyr_</code> functions so that <code>mrgsims</code> objects can be piped to <code>mutate</code>, <code>group_by</code>, <code>filter</code>, <code>summarise</code>, <code>do</code>, <code>select</code>, and <code>summarise.each</code> (it’s a dot not an underscore). So: <code><a href="../reference/%&gt;%.html">mod %&gt;% mrgsim %&gt;% mutate(group=1)</a></code>
</li>
<li>You can now set initial conditions though <code>idata</code>; for compartment <code>CMT</code>, include a column in <code>idata</code> called <code>CMT_0</code>
</li>
<li>Modified update policy for <code>$OMEGA</code> and <code>$SIGMA</code>: if all incoming matrices are unnamed and the signature matches the model object, the update will happen</li>
<li>Added <code>mcRNG</code> function as alias to <code>base::RNGkind("L'Ecuyer-CMRG")</code>
</li>
</ul>
</div>
<div id="important-changes-3" class="section level2">
<h2 class="hasAnchor">
<a href="#important-changes-3" class="anchor"> </a>Important changes</h2>
<ul>
<li>Changes to <code>recsort</code>: 1 and 2 will put explicit doses after observations at the same time, 3 and 4 will put explicit doses before observations at the same time. 2 and 4 will put doses scheduled through <code>addl</code> after observations at the same time; 1 and 3 put doses scheduled through <code>addl</code> before observations at the same tile.</li>
</ul>
</div>
<div id="under-the-hood-4" class="section level2">
<h2 class="hasAnchor">
<a href="#under-the-hood-4" class="anchor"> </a>Under the hood</h2>
<ul>
<li>Changed dosing lag time mechanism so that lag times are calculated as the simulation progresses and dose times in the simulated output are as in the input data</li>
<li>Model shared objects are given random names every time the model is compiled and loaded</li>
<li>Various fixes and expansions to documentation</li>
<li>Changed <code>R</code> dependency to <code>&gt;= 3.1.2</code>
</li>
<li>All <code>Ops</code> involving <code>mrgmod</code> objects are now deprecated</li>
<li>
<code>loadso</code> now returns the model object (invisibly)</li>
<li>Compartment names are automatically removed from table map</li>
<li>Model specification files in need of compilation are detected via md5sum</li>
<li>Minimum of 2 sec wait time is required before re-compiling a model</li>
<li>Added <code>init</code> method with signature <code>mrgmod</code>,<code>ANY</code>, with <code>ANY</code> getting coerced to <code>list</code>
</li>
</ul>
</div>
</div>
    </div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
        <li><a href="#since-0-7-7">0.7.7</a></li>
        <li><a href="#since-0-7-6">0.7.6</a></li>
        <li><a href="#since-0-7-5">0.7.5</a></li>
        <li><a href="#since-0-7-4">0.7.4</a></li>
        <li><a href="#since-0-7-3">0.7.3</a></li>
        <li><a href="#since-0-7-2">0.7.2</a></li>
        <li><a href="#since-0-7-1">0.7.1</a></li>
        <li><a href="#since-0-7-0">0.7.0</a></li>
        <li><a href="#since-0-6-1">0.6.1</a></li>
        <li><a href="#since-0-6-0">0.6.0</a></li>
        <li><a href="#since-0-5-12">0.5.12</a></li>
        <li><a href="#since-0-5-11">0.5.11</a></li>
        <li><a href="#since-0-5-001">0.5.001</a></li>
      </ul>
    </div>
  </div>

</div>

      <footer>
      <div class="copyright">
  <p>Developed by Kyle T Baron.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
